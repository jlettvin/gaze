<!DOCTYPE html>

<html>
	<head>
        <meta charset="UTF-8">
<style>
body {
	font-family:
            Courier New, Courier,
            Lucida Sans Typewriter, Lucida Typewriter,
            monospace;
	font-size: 10px;
	font-variant: normal;
	font-weight: 200;
	line-height: 10px;
}
h3 {
    font-size: 20px;
}
table, th, td {
	border: 1px solid black;
	border-collapse: collapse;
	vertical-align: middle;
	text-align: center;
}
td { height: 45px; width: 45px; color: white; }
</style>
<script type="text/javascript">
var active = 11;
var strong = 2;
var indices = 137;
var cell  = [54, 131, 88, 35, 133, 90, 108, 28, 58, 148, 7, 37, 63, 80, 146, 93, 70, 151, 27, 22, 91, 71, 78, 111, 62, 127, 132, 112, 147, 49, 19, 107, 21, 79, 15, 96, 34, 124, 69, 33, 30, 115, 57, 153, 149, 4, 150, 95, 50, 68, 152, 85, 56, 126, 138, 65, 36, 136, 97, 135, 75, 82, 53, 92, 110, 81, 121, 47, 76, 89, 125, 41, 105, 66, 103, 59, 52, 84, 120, 48, 119, 100, 118, 86, 46, 163, 137, 101, 45, 114, 102, 60, 106, 104, 67, 122, 43, 16, 18, 20, 161, 99, 64, 32, 140, 128, 141, 83, 87, 134, 31, 94, 74, 164, 8, 145, 98, 6, 17, 23, 77, 162, 61, 116, 73, 139, 123, 29, 55, 160, 42, 113, 109, 5, 72, 40, 44];
var index = 0;
var timer = null;
var running  = true;
var interval = 5;
var inverses = [];
var colors = [['#552222','white'], ['#ff6666','white']];

function eButton (e)
{
    var id = e.target.id;
    var key = document.getElementById (id).innerHTML;
    var val = document.distributor[key];
    var tgt = document.getElementById ('info');
    tgt.value = val;
}

function eRun (e)
{
    running = !running;
    if (running) { timer = setInterval (loop, interval); }
    else         { clearInterval (timer); timer = null;  }
    var button = document.getElementById ("pause");
    button.innerHTML = running ? "STOP" : "RUN";
}

function reColor (className,scheme)
{
    var colorPair = colors[scheme];
    //console.log (scheme, className);
    var elements = document.getElementsByClassName (className);
    for (element of elements)
    {
        element.style.backgroundColor = colorPair[0];
        element.style.color           = colorPair[1];
    }
}

function makeButtons (names)
{
    var text = '';
    var i = 0;
    for (name of names)
    {
        var id = 'button' + i++;
        text += '<button id="' + id + '" onclick="eButton(event)">' +                 name +                 '</button>';
    }
    var element = document.getElementById ('buttons');
    element.innerHTML = text;
}

function loop ()
{
    //console.log (inverses);
    for (classname of inverses)
    {
        reColor (classname, 0);
    }
    inverses = [];

    var date = new Date ();
    var odd = (date.getSeconds () & 1);
    var strength = 1 + strong * odd;
    for (var i=0, I=active * strength; i<I; ++i)
    {
        index = (index + 1) % indices;
        var classname = 'i' + cell[index];

        inverses.push (classname);
        reColor (classname, 1);
    }
    var state = document.getElementById ('state');
    state.innerHTML = odd ? 'STRONG' : 'weak';
}

function info ()
{
    document.distributor = {};

    document.distributor['Abstract'   ] = '\
This model simplifies neurons and muscles.\n\
It shows a cross-section of 136 muscle fibers in a muscle fiber bundle.\n\
Muscle fibers are twitch units which generate a shortening force.\n\
The twitch is transient, and cannot be repeated until after unit recovery.\n\
A square represents the cut end of a muscle fiber.\n\
Squares are identified by sequence numbers and center-based coordinates.\n\
Note the (0,0) coordinates at the center of the muscle.\
';

    document.distributor['Running'   ] = '\
Try using the "RUN" button to watch an animation of reliable activations.\n\
When running, the model shows twitching muscle fibers as light red\n\
while muscle fibers at rest or recovering are shown in dark red.\n\
Twitch units run end-to-end and are excited by a single motor neuron.\n\
Twitch patterns show a repeating weak/STRONG tonus for 1 second each.\
';

    document.distributor['Axon' ] = '\
A motor neuron attaches at many points along a single twitch unit.\n\
A twitch signal is sent to all neuromuscular junctions in a muscle fiber.\n\
A twitch unit is activated end-to-end with a single signal.\
';

    document.distributor['Dendrite' ] = '\
The remote dendrite shape for a motor neuron feeding a muscle fiber\n\
has a complex shape implementing a sampler of a regular sweeping pattern.\n\
The dendrite hosts a fixed set of pre-randomized dendritic spines.\n\
As the sweeping pattern passes across the dendritic spines\n\
those which sample a boundary in the pattern twitch their muscle fibers.\
';

    document.distributor['Coincidence' ] = '\
The remote dendrite for each motor neuron expresses a pattern\n\
which makes its gradient detectors unique within the sampled pattern.\n\
It most likely samples the pattern in multiple places and uses the\n\
coincidence of samples to trigger the pulse that activates a muscle fiber.\
';

    document.distributor['Discussion' ] = '\
As long as the pattern delivered is reliable,\n\
twitch unit duty cycle timing requirements are satisfied.\n\
This strategy guarantees maximum recovery time for all muscle fibers.\n\
The illustration below shows this behavior.\n\
The code driving this image is logically equivalent to\n\
the proposed pre-randomized sampling of a regular pattern.\
';

    document.distributor['Conclusions'] = '\
This simple demonstration illustrates a logical economy\n\
enabling implementations to ignore parallelism and simply\n\
act concurrently on all actual delivered pulses,\n\
whether they are dense or sparse,\n\
without the burden of unnecessary calculation.\n\
This is one of the economies expected in vivo.\
';

    var keys = [];
    for (key in document.distributor) keys.push (key);
    makeButtons (keys);

}

function main ()
{
    info ();
    eRun ();
}

window.onload = function ()
{
    main ();
}
</script>
	</head>
	<body>
        <div align="center">
        <h3>Twitch Distributor Visualization</h3>
        <i>Copyright&copy; 2018 Jonathan D. Lettvin, All Rights Reserved.</i>
        <br /><textarea id="info" rows="7" cols="80">
        Click the buttons under here to fill this area with information.
        </textarea><br />
        <span id="buttons"></span>
        <table><caption><h3>Muscle Fiber Bundle Cross Section</h3></caption>
<td colspan="13"><button id="pause" onclick="eRun(event)">STOP</button> <- Click here to observe active distribution (or pause)</td><tr><td colspan="13">tonus<h2 id="state">None</h2></td>
</tr><tr><td></td><td></td><td></td><td></td><td class="i4" style="color:white;" bgcolor="#552222">0<br />(-2,+6)</td><td class="i5" style="color:white;" bgcolor="#552222">1<br />(-1,+6)</td><td class="i6" style="color:white;" bgcolor="#552222">2<br />(+0,+6)</td><td class="i7" style="color:white;" bgcolor="#552222">3<br />(+1,+6)</td><td class="i8" style="color:white;" bgcolor="#552222">4<br />(+2,+6)</td><td></td><td></td><td></td><td></td>
</tr><tr><td></td><td></td><td class="i15" style="color:white;" bgcolor="#552222">5<br />(-4,+5)</td><td class="i16" style="color:white;" bgcolor="#552222">6<br />(-3,+5)</td><td class="i17" style="color:white;" bgcolor="#552222">7<br />(-2,+5)</td><td class="i18" style="color:white;" bgcolor="#552222">8<br />(-1,+5)</td><td class="i19" style="color:white;" bgcolor="#552222">9<br />(+0,+5)</td><td class="i20" style="color:white;" bgcolor="#552222">10<br />(+1,+5)</td><td class="i21" style="color:white;" bgcolor="#552222">11<br />(+2,+5)</td><td class="i22" style="color:white;" bgcolor="#552222">12<br />(+3,+5)</td><td class="i23" style="color:white;" bgcolor="#552222">13<br />(+4,+5)</td><td></td><td></td>
</tr><tr><td></td><td class="i27" style="color:white;" bgcolor="#552222">14<br />(-5,+4)</td><td class="i28" style="color:white;" bgcolor="#552222">15<br />(-4,+4)</td><td class="i29" style="color:white;" bgcolor="#552222">16<br />(-3,+4)</td><td class="i30" style="color:white;" bgcolor="#552222">17<br />(-2,+4)</td><td class="i31" style="color:white;" bgcolor="#552222">18<br />(-1,+4)</td><td class="i32" style="color:white;" bgcolor="#552222">19<br />(+0,+4)</td><td class="i33" style="color:white;" bgcolor="#552222">20<br />(+1,+4)</td><td class="i34" style="color:white;" bgcolor="#552222">21<br />(+2,+4)</td><td class="i35" style="color:white;" bgcolor="#552222">22<br />(+3,+4)</td><td class="i36" style="color:white;" bgcolor="#552222">23<br />(+4,+4)</td><td class="i37" style="color:white;" bgcolor="#552222">24<br />(+5,+4)</td><td></td>
</tr><tr><td></td><td class="i40" style="color:white;" bgcolor="#552222">25<br />(-5,+3)</td><td class="i41" style="color:white;" bgcolor="#552222">26<br />(-4,+3)</td><td class="i42" style="color:white;" bgcolor="#552222">27<br />(-3,+3)</td><td class="i43" style="color:white;" bgcolor="#552222">28<br />(-2,+3)</td><td class="i44" style="color:white;" bgcolor="#552222">29<br />(-1,+3)</td><td class="i45" style="color:white;" bgcolor="#552222">30<br />(+0,+3)</td><td class="i46" style="color:white;" bgcolor="#552222">31<br />(+1,+3)</td><td class="i47" style="color:white;" bgcolor="#552222">32<br />(+2,+3)</td><td class="i48" style="color:white;" bgcolor="#552222">33<br />(+3,+3)</td><td class="i49" style="color:white;" bgcolor="#552222">34<br />(+4,+3)</td><td class="i50" style="color:white;" bgcolor="#552222">35<br />(+5,+3)</td><td></td>
</tr><tr><td class="i52" style="color:white;" bgcolor="#552222">36<br />(-6,+2)</td><td class="i53" style="color:white;" bgcolor="#552222">37<br />(-5,+2)</td><td class="i54" style="color:white;" bgcolor="#552222">38<br />(-4,+2)</td><td class="i55" style="color:white;" bgcolor="#552222">39<br />(-3,+2)</td><td class="i56" style="color:white;" bgcolor="#552222">40<br />(-2,+2)</td><td class="i57" style="color:white;" bgcolor="#552222">41<br />(-1,+2)</td><td class="i58" style="color:white;" bgcolor="#552222">42<br />(+0,+2)</td><td class="i59" style="color:white;" bgcolor="#552222">43<br />(+1,+2)</td><td class="i60" style="color:white;" bgcolor="#552222">44<br />(+2,+2)</td><td class="i61" style="color:white;" bgcolor="#552222">45<br />(+3,+2)</td><td class="i62" style="color:white;" bgcolor="#552222">46<br />(+4,+2)</td><td class="i63" style="color:white;" bgcolor="#552222">47<br />(+5,+2)</td><td class="i64" style="color:white;" bgcolor="#552222">48<br />(+6,+2)</td>
</tr><tr><td class="i65" style="color:white;" bgcolor="#552222">49<br />(-6,+1)</td><td class="i66" style="color:white;" bgcolor="#552222">50<br />(-5,+1)</td><td class="i67" style="color:white;" bgcolor="#552222">51<br />(-4,+1)</td><td class="i68" style="color:white;" bgcolor="#552222">52<br />(-3,+1)</td><td class="i69" style="color:white;" bgcolor="#552222">53<br />(-2,+1)</td><td class="i70" style="color:white;" bgcolor="#552222">54<br />(-1,+1)</td><td class="i71" style="color:white;" bgcolor="#552222">55<br />(+0,+1)</td><td class="i72" style="color:white;" bgcolor="#552222">56<br />(+1,+1)</td><td class="i73" style="color:white;" bgcolor="#552222">57<br />(+2,+1)</td><td class="i74" style="color:white;" bgcolor="#552222">58<br />(+3,+1)</td><td class="i75" style="color:white;" bgcolor="#552222">59<br />(+4,+1)</td><td class="i76" style="color:white;" bgcolor="#552222">60<br />(+5,+1)</td><td class="i77" style="color:white;" bgcolor="#552222">61<br />(+6,+1)</td>
</tr><tr><td class="i78" style="color:white;" bgcolor="#552222">62<br />(-6,+0)</td><td class="i79" style="color:white;" bgcolor="#552222">63<br />(-5,+0)</td><td class="i80" style="color:white;" bgcolor="#552222">64<br />(-4,+0)</td><td class="i81" style="color:white;" bgcolor="#552222">65<br />(-3,+0)</td><td class="i82" style="color:white;" bgcolor="#552222">66<br />(-2,+0)</td><td class="i83" style="color:white;" bgcolor="#552222">67<br />(-1,+0)</td><td class="i84" style="color:white;" bgcolor="#552222">68<br />(+0,+0)</td><td class="i85" style="color:white;" bgcolor="#552222">69<br />(+1,+0)</td><td class="i86" style="color:white;" bgcolor="#552222">70<br />(+2,+0)</td><td class="i87" style="color:white;" bgcolor="#552222">71<br />(+3,+0)</td><td class="i88" style="color:white;" bgcolor="#552222">72<br />(+4,+0)</td><td class="i89" style="color:white;" bgcolor="#552222">73<br />(+5,+0)</td><td class="i90" style="color:white;" bgcolor="#552222">74<br />(+6,+0)</td>
</tr><tr><td class="i91" style="color:white;" bgcolor="#552222">75<br />(-6,-1)</td><td class="i92" style="color:white;" bgcolor="#552222">76<br />(-5,-1)</td><td class="i93" style="color:white;" bgcolor="#552222">77<br />(-4,-1)</td><td class="i94" style="color:white;" bgcolor="#552222">78<br />(-3,-1)</td><td class="i95" style="color:white;" bgcolor="#552222">79<br />(-2,-1)</td><td class="i96" style="color:white;" bgcolor="#552222">80<br />(-1,-1)</td><td class="i97" style="color:white;" bgcolor="#552222">81<br />(+0,-1)</td><td class="i98" style="color:white;" bgcolor="#552222">82<br />(+1,-1)</td><td class="i99" style="color:white;" bgcolor="#552222">83<br />(+2,-1)</td><td class="i100" style="color:white;" bgcolor="#552222">84<br />(+3,-1)</td><td class="i101" style="color:white;" bgcolor="#552222">85<br />(+4,-1)</td><td class="i102" style="color:white;" bgcolor="#552222">86<br />(+5,-1)</td><td class="i103" style="color:white;" bgcolor="#552222">87<br />(+6,-1)</td>
</tr><tr><td class="i104" style="color:white;" bgcolor="#552222">88<br />(-6,-2)</td><td class="i105" style="color:white;" bgcolor="#552222">89<br />(-5,-2)</td><td class="i106" style="color:white;" bgcolor="#552222">90<br />(-4,-2)</td><td class="i107" style="color:white;" bgcolor="#552222">91<br />(-3,-2)</td><td class="i108" style="color:white;" bgcolor="#552222">92<br />(-2,-2)</td><td class="i109" style="color:white;" bgcolor="#552222">93<br />(-1,-2)</td><td class="i110" style="color:white;" bgcolor="#552222">94<br />(+0,-2)</td><td class="i111" style="color:white;" bgcolor="#552222">95<br />(+1,-2)</td><td class="i112" style="color:white;" bgcolor="#552222">96<br />(+2,-2)</td><td class="i113" style="color:white;" bgcolor="#552222">97<br />(+3,-2)</td><td class="i114" style="color:white;" bgcolor="#552222">98<br />(+4,-2)</td><td class="i115" style="color:white;" bgcolor="#552222">99<br />(+5,-2)</td><td class="i116" style="color:white;" bgcolor="#552222">100<br />(+6,-2)</td>
</tr><tr><td></td><td class="i118" style="color:white;" bgcolor="#552222">101<br />(-5,-3)</td><td class="i119" style="color:white;" bgcolor="#552222">102<br />(-4,-3)</td><td class="i120" style="color:white;" bgcolor="#552222">103<br />(-3,-3)</td><td class="i121" style="color:white;" bgcolor="#552222">104<br />(-2,-3)</td><td class="i122" style="color:white;" bgcolor="#552222">105<br />(-1,-3)</td><td class="i123" style="color:white;" bgcolor="#552222">106<br />(+0,-3)</td><td class="i124" style="color:white;" bgcolor="#552222">107<br />(+1,-3)</td><td class="i125" style="color:white;" bgcolor="#552222">108<br />(+2,-3)</td><td class="i126" style="color:white;" bgcolor="#552222">109<br />(+3,-3)</td><td class="i127" style="color:white;" bgcolor="#552222">110<br />(+4,-3)</td><td class="i128" style="color:white;" bgcolor="#552222">111<br />(+5,-3)</td><td></td>
</tr><tr><td></td><td class="i131" style="color:white;" bgcolor="#552222">112<br />(-5,-4)</td><td class="i132" style="color:white;" bgcolor="#552222">113<br />(-4,-4)</td><td class="i133" style="color:white;" bgcolor="#552222">114<br />(-3,-4)</td><td class="i134" style="color:white;" bgcolor="#552222">115<br />(-2,-4)</td><td class="i135" style="color:white;" bgcolor="#552222">116<br />(-1,-4)</td><td class="i136" style="color:white;" bgcolor="#552222">117<br />(+0,-4)</td><td class="i137" style="color:white;" bgcolor="#552222">118<br />(+1,-4)</td><td class="i138" style="color:white;" bgcolor="#552222">119<br />(+2,-4)</td><td class="i139" style="color:white;" bgcolor="#552222">120<br />(+3,-4)</td><td class="i140" style="color:white;" bgcolor="#552222">121<br />(+4,-4)</td><td class="i141" style="color:white;" bgcolor="#552222">122<br />(+5,-4)</td><td></td>
</tr><tr><td></td><td></td><td class="i145" style="color:white;" bgcolor="#552222">123<br />(-4,-5)</td><td class="i146" style="color:white;" bgcolor="#552222">124<br />(-3,-5)</td><td class="i147" style="color:white;" bgcolor="#552222">125<br />(-2,-5)</td><td class="i148" style="color:white;" bgcolor="#552222">126<br />(-1,-5)</td><td class="i149" style="color:white;" bgcolor="#552222">127<br />(+0,-5)</td><td class="i150" style="color:white;" bgcolor="#552222">128<br />(+1,-5)</td><td class="i151" style="color:white;" bgcolor="#552222">129<br />(+2,-5)</td><td class="i152" style="color:white;" bgcolor="#552222">130<br />(+3,-5)</td><td class="i153" style="color:white;" bgcolor="#552222">131<br />(+4,-5)</td><td></td><td></td>
</tr><tr><td></td><td></td><td></td><td></td><td class="i160" style="color:white;" bgcolor="#552222">132<br />(-2,-6)</td><td class="i161" style="color:white;" bgcolor="#552222">133<br />(-1,-6)</td><td class="i162" style="color:white;" bgcolor="#552222">134<br />(+0,-6)</td><td class="i163" style="color:white;" bgcolor="#552222">135<br />(+1,-6)</td><td class="i164" style="color:white;" bgcolor="#552222">136<br />(+2,-6)</td><td></td><td></td><td></td><td></td>
</tr></table>
        </div>
	</body>
</html>

